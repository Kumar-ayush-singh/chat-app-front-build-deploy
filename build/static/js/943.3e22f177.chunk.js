"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[943],{8943:function(n,e,t){t.r(e),t.d(e,{default:function(){return vn}});var a,r,i,s,o,c,d=t(168),l=t(2791),h=t(6444),p=t(9439),x=t(9434),u=t(4165),m=t(5861),g=t(1912),f=t(8077),v=h.ZP.section(a||(a=(0,d.Z)(["\n\n  --thm-online-status-color: var(--thm-primary-color);\n  --thm-selected-chat-color: linear-gradient(300deg, var(--thm-primary-color), var(--thm-secondary-color));\n\n  margin-bottom: 5px;\n  @media (max-width: 950px){\n    margin: 0;\n  }\n\n  .card {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    background-color: var(--thm-transparent-color);\n    border-radius: 15px;\n    padding: 15px 20px;\n    // box-shadow: 0px 0px 2px var(--thm-background-color) inset;\n    // position: relative;\n\n    @media(max-width: 950px){\n      background-color: transparent;\n      padding: 10px;\n    }\n\n    &:hover{\n      background: var(--thm-transparent2-color);\n    }\n    &.active{\n      @media (min-width: 750px){\n        background: var(--thm-selected-chat-color);\n      }\n    }\n\n    &>div.img-notification-container {\n      height: max-content;\n      width: max-content;\n      position: relative;\n\n      img{\n        width: 50px;\n        height: 50px;\n        width: 50px;\n        border-radius: 50%;\n      }\n\n      div{\n        position: absolute;\n        top: 0;\n        right: 0;\n        width: 20px;\n        height: 20px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        color: black;\n        font-weight: bold;\n        background: yellow;\n      }\n    }\n\n    &>div.card-info{\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n      overflow: hidden;\n\n      h5{\n        margin: 0;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n      }\n\n      span{\n        font-size: 12px;\n        color: #d5d5d5;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-weight: 500;\n      }\n\n      &.new-message{\n        font-weight: bold;\n      }\n    }\n\n    &>span, div.img-notification-container{\n      display: block;\n      flex-shrink: 0;\n      flex-grow: 0;\n    }\n    \n    &>span.online{\n      width: 12px;\n      height: 12px;\n      border-radius: 50%;\n\n      background: var(--thm-online-status-color);\n    }\n  }\n"]))),w=t(6118),j=t(8772),b=t(6247),y=t(7215),k=t(184),Z=function(n){var e=(0,x.I0)(),t=(0,x.v9)((function(n){return n.user})).user,a=(0,x.v9)((function(n){return n.chat})).currentChat,r=(0,x.v9)((function(n){return n.realTime})),i=r.onlineUsers,s=r.chatNotifications;(0,l.useEffect)((function(){console.warn(n),n.chat.lastMessage&&e((0,w.at)({chatId:n.chat._id,lastMessage:n.chat.lastMessage,newMsgCount:n.chat.lastMessage.senderId!==t.userId?n.chat.unreadMsgCount:0,lastViewedMessage:n.chat.lastViewedMessage,dataFromDB:!0}))}),[n.chat]),console.warn(n);var o=n.chat._id===a.Id;return(0,k.jsx)(v,{children:(0,k.jsxs)("div",{className:(o?"active":"")+" card",onClick:function(){s[n.chat._id]&&0===s[n.chat._id].newMsgCount&&e((0,w.tk)(n.chat._id)),e((0,f.h$)({name:n.chat.otherMember.name,Id:n.chat.otherMember._id,avatar:n.chat.otherMember.avatar})),e((0,f.YQ)({chatId:n.chat._id,userId:t.userId})),e((0,b.Lb)("currentChatContainer")),s[n.chat._id]&&s[n.chat._id].newMsgCount&&(e((0,w.zF)(n.chat._id)),j.Z.emit("message-viewed",n.chat._id,n.chat.lastMessage._id,(function(n){console.log("Viewed message id is send to server and get response status ".concat(n.status))})))},children:[(0,k.jsxs)("div",{className:"img-notification-container",children:[(0,k.jsx)("img",{src:(0,y.Z)(n.chat.otherMember.avatar),alt:""}),s[n.chat._id]&&s[n.chat._id].newMsgCount>=1?(0,k.jsx)("div",{children:s[n.chat._id].newMsgCount}):null]}),(0,k.jsxs)("div",{className:"card-info new-message",children:[(0,k.jsx)("h5",{children:n.chat.otherMember.name}),s[n.chat._id]&&s[n.chat._id].lastMessage.text?(0,k.jsx)("span",{children:s[n.chat._id].lastMessage.text}):null]}),(0,k.jsx)("span",{className:i[n.chat.otherMember._id]?"online":"offline"})]})})},N=t(6719),C=t(9341),I=t(5033),M=h.ZP.div(r||(r=(0,d.Z)(["\nheight: 100%;\n\n    .chat404{\n        width: 100%;\n        height: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 30px;\n        border-radius: 15px;\n        background: linear-gradient(var(--thm-transparent-color), transparent);\n        font-weight: 500;\n\n\n        &>div{\n            width: 100%;\n            padding: 20px;\n            margin-top: -50px;\n            text-align: center;\n            background: var(--thm-transparent-color);\n            border-radius: 10px;\n            \n            button{\n                margin-top: 15px;\n                background: var(--thm-gradient);\n                outline: none;\n                border: none;\n                border-radius: 5px;\n                padding: 10px 20px;\n                cursor: pointer;\n                font-weight: inherit;\n            }\n        }\n    }\n"]))),z=function(){var n=(0,x.I0)(),e=(0,x.v9)((function(n){return n.user})).user,t=(0,x.v9)((function(n){return n.chat})),a=t.allChats,r=t.newChat,i=function(){var t=(0,m.Z)((0,u.Z)().mark((function t(){var a,r,i;return(0,u.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=(0,N.LP)()){t.next=5;break}return n(C.ne),t.abrupt("return");case 5:return t.next=7,g.Z.get("".concat(I.L,":").concat(I.p,"/api/chat/").concat(e.userId),{headers:{Authorization:"Bearer ".concat(a)}});case 7:r=t.sent,i=r.data,n((0,f.uE)(i)),console.log("All Chats of user : "),console.log(i),t.next=16;break;case 14:t.prev=14,t.t0=t.catch(0);case 16:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(){return t.apply(this,arguments)}}();(0,l.useEffect)((function(){i()}),[r]);return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(M,{children:0===a.length?(0,k.jsx)("div",{className:"chat404",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:"No Chat Available."}),(0,k.jsx)("button",{onClick:function(){n((0,b.XU)("searchUsers"))},children:"Start New"})]})}):a.map((function(n,e){return(0,k.jsx)(Z,{chat:n},e)}))})})},P=t(6355),_=h.ZP.section(i||(i=(0,d.Z)(["\n  .chat-card {\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    border-radius: 20px 20px;\n    margin: 5px 1rem;\n    background-color: white;\n    padding: 0.5rem;\n    .icon {\n      font-size: 2rem;\n    }\n  }\n"]))),q=function(){return(0,k.jsx)(_,{children:(0,k.jsxs)("div",{className:"chat-card",children:[(0,k.jsx)("div",{className:"icon",children:(0,k.jsx)(P.qc7,{})}),(0,k.jsx)("h5",{children:"group name"})]})})},U=h.ZP.section(s||(s=(0,d.Z)(["\n\n"]))),L=function(){return(0,k.jsx)(U,{children:(0,k.jsx)(q,{})})},E=function(n){var e=n.name,t=n.Id,a=n.avatar;console.log(e+" : "+t);var r=(0,x.I0)(),i=(0,x.v9)((function(n){return n.user})).user,s=(0,x.v9)((function(n){return n.realTime})).onlineUsers;(0,x.v9)((function(n){return n.chat.currentChat})).receiverId;console.log((0,x.v9)((function(n){return n})));var o=function(){var n=(0,m.Z)((0,u.Z)().mark((function n(){var a,s,o;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(a=(0,N.LP)())||r((0,C.ne)()),console.log(i),n.next=6,g.Z.post("".concat(I.L,":").concat(I.p,"/api/chat"),{senderId:i.userId,receiverId:t},{headers:{Authorization:"Bearer ".concat(a)}});case 6:s=n.sent,o=s.data,r((0,f.YQ)({chatId:o._id,userId:i.userId})),r((0,b.XU)("recentChats")),r((0,f.h$)({name:e,Id:t})),r((0,b.Lb)("currentChatContainer")),console.log(o),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),console.log(n.t0);case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(){return n.apply(this,arguments)}}();return(0,k.jsx)(v,{children:(0,k.jsxs)("div",{className:"card",onClick:o,children:[(0,k.jsx)("div",{className:"img-notification-container",children:(0,k.jsx)("img",{src:(0,y.Z)(a),alt:""})}),(0,k.jsx)("div",{className:"card-info",children:(0,k.jsx)("h5",{children:e})}),(0,k.jsx)("span",{className:s[t]?"online":"offline"})]})})},O=h.ZP.section(o||(o=(0,d.Z)(["\n  .search-bar-user {\n    display: flex;\n    /* background-color: red; */\n    justify-content: center;\n    align-items: center;\n    gap: 1rem;\n    margin: 1rem auto;\n\n    input {\n      border: none;\n      border-radius: 2px 2px;\n      padding: 0.2 1rem;\n      font-size: 1.2rem;\n    }\n    button {\n      padding: 0.2rem 1rem;\n      border-radius: 10px 10px;\n      border: none;\n      font-size: 1rem;\n    }\n    button:hover {\n    }\n  }\n"]))),T=function(){var n=(0,x.v9)((function(n){return n.user})).user,e=(0,l.useState)([]),t=(0,p.Z)(e,2),a=t[0],r=t[1],i=(0,x.I0)(),s=function(){var n=(0,m.Z)((0,u.Z)().mark((function n(){var e,t,s;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=(0,N.LP)()){n.next=4;break}return i((0,C.ne)()),n.abrupt("return");case 4:return n.next=6,g.Z.get("".concat(I.L,":").concat(I.p,"/api/user/get-all/"),{headers:{Authorization:"Bearer ".concat(e)}});case 6:t=n.sent,s=t.data,r(s),console.log(a);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,l.useEffect)((function(){s()}),[]),(0,k.jsx)(O,{children:a.map((function(e,t){var a=e.name,r=e._id,i=e.avatar;return r===n.userId?null:(0,k.jsx)(E,{name:a,Id:r,avatar:i},t)}))})},A=t(9126),F=t(3853),S=t(7689),G=t(1087),B=t(7692);function R(){var n=(0,x.v9)((function(n){return n.chatNav})).chatSection,e=(0,x.I0)(),t=(0,S.s0)();function a(n){e((0,b.XU)(n))}return(0,k.jsxs)($,{className:"chatNavBar",children:[(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{className:"groupChats"===n?"active":"",onClick:function(){a("groupChats")},children:(0,k.jsx)(B.p$$,{})}),(0,k.jsx)("li",{className:"recentChats"===n?"active":"",onClick:function(){a("recentChats")},children:(0,k.jsx)(A.i0Y,{})}),(0,k.jsx)("li",{className:"searchUsers"===n?"active":"",onClick:function(){a("searchUsers")},children:(0,k.jsx)(B.EDj,{})})]}),(0,k.jsxs)("div",{className:"high-order-buttons",children:[(0,k.jsx)("button",{className:"home",children:(0,k.jsx)(G.rU,{to:"/",children:(0,k.jsx)(P.xng,{})})}),(0,k.jsx)("button",{className:"log-out",onClick:function(){e((0,C.ne)()),t("/")},children:(0,k.jsx)(G.rU,{to:"/",children:(0,k.jsx)(B.TPb,{})})})]})]})}var V,X,Y,D,$=h.ZP.nav(c||(c=(0,d.Z)(['\n\n&.chatNavBar {\n    --container-width: 80px;\n    width: var(--container-width);\n    height: 100%;\n    display: flex;\n    align-items: center;\n    position: relative;\n\n    @media (max-width: 950px){\n        width: 100%;\n    }\n\n    ul {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n\n      @media (max-width: 950px){\n        flex-direction: row;\n        justify-content: space-between;\n      }\n\n      li{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 10px 20px;\n        margin: 10px 0px;\n        cursor: pointer;\n        position: relative;\n\n        @media (max-width: 950px){\n            margin: 0px;\n            padding: 10px;\n        }\n\n        &, *{\n          transition: 0.2s ease;\n        }\n\n        svg{\n          width: var(--container-width);\n          height: 25px;\n          transform: scale(1);\n          transform-origin: center center;\n        }\n\n        &.active, &:hover{\n          svg{\n            transform: scale(1.2);\n          }\n        }\n        \n        &.active{\n          @media (max-width: 950px){\n            margin-top: -15px;\n          }\n\n          svg{\n            fill: var(--thm-svg-active-color);\n          }\n\n          &::after{\n            top: 0;\n            height: 100%;\n\n            @media(max-width: 950px){\n                height: 3px;\n                left: 0;\n                top: unset;\n                width: 100%;\n            }\n          }\n\n        }\n        &::after{\n          content: "";\n          position: absolute;\n          display: block;\n          background: var(--thm-svg-active-color);\n          top: 50%;\n          left: 0px;\n          width: 5px;\n          border-radius: 3px;\n          height: 0px;\n          transition: 0.2s linear;\n\n\n          @media (max-width: 950px){\n            top: unset;\n            bottom: 0px;\n            left: 50%;\n            height: 3px;\n            width: 0px;\n          }\n        }\n      }\n    }\n\n    .high-order-buttons{\n      position: absolute;\n      bottom: 0px;\n      left: 0px;\n      width: var(--container-width);\n      padding: 8px;\n\n      @media (max-width: 950px){\n        display: none;\n      }\n\n\n      .home{\n        width: 100%;\n        height: 40px;\n        padding: 5px;\n        margin-bottom: 5px;\n        background: transparent;\n        border: none;\n        outline: none;\n\n        svg{\n          height: 100%;\n          width: 100%;\n          cursor: pointer;\n        }\n      }\n\n      .log-out{\n        height: 40px;\n        width: 100%;\n        background: #fbd547;\n        border-radius: 5px;\n        padding: 5px;\n        overflow: hidden;\n        cursor: pointer;\n\n\n        svg{\n          fill: black;\n          height: 100%;\n          width: 100%;\n          transform: rotate(-180deg);\n          transition: 0.15s ease;\n        }\n\n        &:hover svg{\n          transform: rotate(360deg);\n        }\n      }\n\n    }\n  }\n']))),H=h.ZP.div(V||(V=(0,d.Z)(["\n\n\nwidth: 100%;\nheight: 100%;\nposition: relative;\n\n@media (min-width: 950px){\n  padding-top: 20px;\n}\n\n&>.head{\n  display: grid;\n  grid-template-rows: 1fr;\n  align-items: space-between;\n  height: 100px;\n  position: sticky;\n  top: 0;\n  padding: 0px 20px;\n  border-radius: 0px 0px 15px 15px;\n\n\n  @media(max-width: 950px){\n    margin: 0;\n    padding-top: 20px;\n    background: var(--thm-transparent-color);\n  }\n\n  &>*{\n    @media (max-width: 950px){\n      height: 50%;\n    }\n  }\n\n\n  &>div{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    &>h3{\n      margin: 0;\n      font-size: 30px;\n\n      @media (max-width: 950px){\n        font-size: 25px;\n      }\n    }\n\n    .icon{\n      width: 20px;\n      height: 20px;\n    }\n\n    &>div{\n      display: flex;\n      align-items: center;\n      gap: 15px;\n      cursor: pointer;\n      width: 100%;\n      justify-content: flex-end;\n\n      &.searching-container{\n        width: 100%;\n      }\n\n      input{\n        border: 1px solid var(--thm-primary-color);\n        background: var(--thm-transparent-color);\n        outline: none;\n        width: 0px;\n        height: 30px;\n        opacity: 0;\n        transition: width .2s ease, opacity .5s ease;\n        border-radius: 500px;\n        padding: 0px 10px;\n        pointer-event: none;\n\n        &.searching{\n          opacity: 1;\n          width: 100%;\n          flex-grow: 1;\n          flex-shrink: 1;\n        }\n      }\n\n      &>svg{\n        flex-grow: 0;\n        flex-shrink: 0;\n      }\n    }\n  }\n\n  &>nav{\n    align-self: center;\n    @media (min-width: 951px){\n      display: none;\n    }\n  }\n\n}\n\n&>.chat-section-container{\n  padding: 0px 20px;\n  height: calc(100% - 100px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  // margin-right: -20px;\n\n  @media (max-width: 950px){\n    padding-top: 10px;\n  }\n}\n"]))),W=function(){var n=(0,x.v9)((function(n){return n.chatNav})).chatSection,e=(0,l.useState)(!1),t=(0,p.Z)(e,2),a=t[0],r=t[1],i=function(){r(!a)};return(0,k.jsxs)(H,{children:[(0,k.jsxs)("div",{className:"head",children:[(0,k.jsxs)("div",{children:[!a&&(0,k.jsx)("h3",{children:"recentChats"===n?"Chat":"groupChats"===n?"Groups":"Users"}),(0,k.jsxs)("div",{className:a?"searching-container":"",children:[(0,k.jsx)("input",{type:"search",className:a?"searching":""}),a?(0,k.jsx)(F.hT1,{onClick:i,className:"icon"}):(0,k.jsx)(A.dVI,{onClick:i,className:"icon"})]})]}),(0,k.jsx)("nav",{children:(0,k.jsx)(R,{})})]}),(0,k.jsx)("div",{className:"chat-section-container custom-scroll",children:"recentChats"===n?(0,k.jsx)(z,{}):"groupChats"===n?(0,k.jsx)(L,{}):(0,k.jsx)(T,{})})]})},Q=t(1413),J=t(3433),K=function(n){var e=n.message,t=e.text,a=e.classes;return(0,k.jsx)(nn,{children:(0,k.jsx)("div",{className:"message"+a,children:(0,k.jsx)("div",{className:"msg-text",children:2===t.length&&t[0].codePointAt(0)>8986&&t[0].codePointAt(0)<129511?(0,k.jsx)("span",{className:"only-emoji",children:t}):(0,k.jsx)(k.Fragment,{children:(0,J.Z)(t).map((function(n){return n.codePointAt(0)>8986&&n.codePointAt(0)<129511?(0,k.jsx)("span",{className:"txt-emoji",children:n}):(0,k.jsx)(k.Fragment,{children:n})}))})})})})},nn=h.ZP.section(X||(X=(0,d.Z)(["\n  .message {\n    width: 100%;\n    display: flex;\n    margin-top: 5px;\n    \n    &.left{\n      justify-content: flex-start;\n      .msg-text{\n        background: var(--thm-other-message-background);\n      }\n\n      &.start{\n        .msg-text{\n          border-bottom-left-radius: 2px;\n        }\n      }\n      &.end{\n        .msg-text{\n          border-top-left-radius: 2px;\n        }\n      }\n    }\n    \n    &.right{\n      justify-content: flex-end;\n      .msg-text{\n        background: var(--thm-own-message-background);\n      }\n\n      &.start{\n        .msg-text{\n          border-bottom-right-radius: 2px;\n        }\n      }\n      &.end{\n        .msg-text{\n          border-top-right-radius: 2px;\n        }\n      }\n    }\n\n    .msg-text{\n      max-width: 90%;\n      min-width: 50px;\n      padding: 20px 10px;\n      display: flex;\n      word-break: break-word;\n      white-space: pre-wrap;\n      // justify-content: center;\n      align-items: center;\n      // min-height: 60px;\n      border-radius: 15px;\n      background-color: var(--thm-transparent-color);\n\n      .txt-emoji{\n        font-size: 1.5em;\n        line-height: 1;\n      }\n      .only-emoji{\n        font-size: 2em;\n        line-height: 1;\n      }\n    }\n  }\n"]))),en=l.memo(K),tn=t(6856),an=t(6036),rn=h.ZP.div(Y||(Y=(0,d.Z)(["\nwidth: 100%;\nheight: 100%;\npadding: 20px;\npadding-left: 0px;\n\n&>div{\n    background: linear-gradient(transparent, var(--thm-transparent-color));\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-radius: 15px;\n\n    svg{\n        display: block;\n        min-height: 200px;\n        min-width: 200px;\n        fill: var(--thm-transparent2-color);\n        height: 60%;\n        width: 60%;\n    }\n    div.shadow{\n        width: 100%;\n        height: 20px;\n        box-shadow: 0px -5px 50px 30px var(--thm-background-color);\n        transform: rotateX(80deg);\n        border-radius: 50%;\n    }\n    &>h1{\n        color: var(--thm-transparent2-color);\n    }\n\n\n    .selectedCard{\n        fill: url(#thm-gradient);\n        animation: card 1s ease infinite alternate;\n    }\n    @keyFrames card{\n        0%{\n            fill: var(--thm-transparent2-color);\n        }\n        100%{\n            fiill: url(#thm-gradient);\n        }\n    }\n\n    .card{\n        fill: var(--thm-transparent2-color);\n    }\n\n    // hand \n    .hand{\n        animation: touch 1s ease infinite alternate;\n    }\n\n    @keyframes touch{\n        0%{\n            transform: translateX(-10px) translateY(20px);\n        }\n        100%{\n            transform: translateX(-30px) translateY(0px);\n        }\n    }\n}\n"]))),sn=function(){return(0,k.jsx)(rn,{children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"559.174",height:"600","data-name":"Layer 1",version:"1.1",viewBox:"0 0 559.174 600",children:[(0,k.jsxs)("defs",{children:[(0,k.jsxs)("linearGradient",{id:"thm-gradient",children:[(0,k.jsx)("stop",{offset:"5%","stop-color":"#9816f6"}),(0,k.jsx)("stop",{offset:"95%","stop-color":"#3e2794"})]}),(0,k.jsxs)("linearGradient",{id:"linearGradient1260",children:[(0,k.jsx)("stop",{offset:"0",stopColor:"#111827",stopOpacity:"1"}),(0,k.jsx)("stop",{offset:"0.511",stopColor:"#111827",stopOpacity:"0.749"}),(0,k.jsx)("stop",{offset:"0.789",stopColor:"#111827",stopOpacity:"0.498"}),(0,k.jsx)("stop",{offset:"1",stopColor:"#111827",stopOpacity:"0"})]}),(0,k.jsx)("radialGradient",{id:"radialGradient1262",cx:"317.374",cy:"578.388",r:"166.402",fx:"317.374",fy:"578.388",gradientTransform:"matrix(1 0 0 .11216 0 513.518)",gradientUnits:"userSpaceOnUse",spreadMethod:"reflect",xlinkHref:"#linearGradient1260"})]}),(0,k.jsx)("path",{className:"selectedCard",fill:"#00bfa6",d:"M420.747 125.949L142.158 90.43a18.086 18.086 0 00-2.263-.147 17.258 17.258 0 00-2.23.141 17.065 17.065 0 00-2.19.429 17.498 17.498 0 00-2.14.722 18.222 18.222 0 00-1.992.963 18.957 18.957 0 00-1.889 1.204 20.222 20.222 0 00-1.777 1.45 22.086 22.086 0 00-1.658 1.685 23.762 23.762 0 00-1.512 1.905q-.714 1.002-1.34 2.086-.626 1.087-1.162 2.26-.535 1.174-.977 2.427-.458 1.295-.802 2.648-.344 1.353-.575 2.753-.226 1.4-.347 2.844-.12 1.444-.12 2.924.005 1.478.12 2.946.116 1.469.347 2.913.233 1.45.578 2.873.344 1.421.801 2.81.442 1.342.978 2.623.535 1.282 1.161 2.494.626 1.213 1.34 2.355.713 1.147 1.512 2.208.8 1.06 1.659 2.023.86.957 1.777 1.806.917.848 1.888 1.585a23.625 23.625 0 001.992 1.358 21.765 21.765 0 002.14 1.147 20.075 20.075 0 002.19.868 18.974 18.974 0 002.23.589 18.476 18.476 0 002.264.307l278.588 20.378a7.056 7.056 0 002.408-.24 7.552 7.552 0 001.161-.43 8.599 8.599 0 001.128-.631 10.035 10.035 0 001.043-.795 11.676 11.676 0 00.982-.963 13.852 13.852 0 00.918-1.127q.445-.604.854-1.288.41-.683.774-1.426.365-.743.682-1.543.32-.8.59-1.654.271-.855.494-1.76.235-.937.404-1.907.17-.97.29-1.97.117-.998.175-2.024.058-1.025.058-2.074-.004-1.047-.058-2.085-.054-1.037-.175-2.06-.116-1.021-.29-2.027-.173-1.005-.404-1.988-.223-.951-.494-1.859-.268-.895-.59-1.764-.321-.87-.682-1.686-.364-.815-.774-1.581-.41-.767-.854-1.46-.443-.692-.918-1.311-.475-.62-.982-1.16a13.498 13.498 0 00-1.043-1.005 11.325 11.325 0 00-1.128-.858 9.502 9.502 0 00-1.161-.662 8.275 8.275 0 00-1.192-.462 7.597 7.597 0 00-1.218-.26","data-name":"Rectangle 1 - Outline"}),(0,k.jsx)("path",{className:"card",fill:"#e4e4e4",d:"M420.747 206.055l-278.589-6.673a17.91 17.91 0 00-4.493.459 18.344 18.344 0 00-2.19.656 19.418 19.418 0 00-2.14.939 20.721 20.721 0 00-1.992 1.165 21.902 21.902 0 00-1.889 1.402 23.58 23.58 0 00-1.777 1.635q-.86.876-1.658 1.864-.799.989-1.512 2.062-.714 1.072-1.34 2.224-.626 1.152-1.162 2.381-.535 1.23-.977 2.528-.458 1.345-.802 2.732-.344 1.388-.575 2.812-.227 1.424-.347 2.881-.12 1.457-.12 2.936.005 1.48.12 2.935.116 1.455.347 2.878.233 1.416.578 2.801.344 1.386.801 2.728.442 1.302.978 2.528.535 1.225 1.161 2.373.626 1.149 1.34 2.216.713 1.065 1.512 2.047.8.982 1.659 1.852a23.351 23.351 0 001.776 1.624 21.71 21.71 0 001.89 1.39 20.544 20.544 0 001.991 1.153 19.277 19.277 0 002.14.925 18.248 18.248 0 002.19.642 17.817 17.817 0 002.23.361 18.005 18.005 0 002.264.073l278.586-8.475a7.253 7.253 0 001.218-.141 7.574 7.574 0 001.192-.345 8.437 8.437 0 001.161-.55 9.87 9.87 0 001.128-.748 11.676 11.676 0 001.043-.903 13.635 13.635 0 00.982-1.064q.474-.568.918-1.222.445-.654.854-1.376.41-.727.774-1.507.365-.78.682-1.613.32-.846.59-1.722.271-.877.494-1.806.234-.951.404-1.94.17-.988.29-1.999.117-1.014.175-2.046.058-1.032.058-2.08-.004-1.039-.058-2.075-.054-1.037-.175-2.047-.116-1.013-.29-1.997-.173-.983-.404-1.946-.224-.93-.495-1.81-.27-.882-.589-1.712-.316-.831-.681-1.61-.365-.779-.774-1.5-.41-.724-.853-1.373t-.919-1.217a13.505 13.505 0 00-.982-1.058 11.566 11.566 0 00-1.043-.896 9.784 9.784 0 00-1.127-.741 8.372 8.372 0 00-1.163-.54 7.536 7.536 0 00-1.192-.338 7.237 7.237 0 00-1.218-.132","data-name":"Rectangle 3 - Outline"}),(0,k.jsx)("path",{className:"card",fill:"#e4e4e4",d:"M420.747 281.153l-278.589 20.375a18.476 18.476 0 00-2.263.307 18.974 18.974 0 00-2.23.588 20.076 20.076 0 00-2.19.868 21.77 21.77 0 00-2.14 1.147 23.63 23.63 0 00-1.992 1.358q-.973.743-1.889 1.585-.916.847-1.777 1.806-.86.96-1.658 2.024-.798 1.067-1.512 2.21-.714 1.142-1.34 2.354-.626 1.214-1.162 2.494-.535 1.281-.977 2.623-.458 1.387-.802 2.811-.344 1.424-.575 2.869-.226 1.447-.347 2.914-.12 1.467-.12 2.947.005 1.48.12 2.924.116 1.444.347 2.844.233 1.404.578 2.754.344 1.35.801 2.649.442 1.254.978 2.426.535 1.174 1.161 2.26.626 1.088 1.34 2.087a23.758 23.758 0 001.512 1.904 22.084 22.084 0 001.659 1.686 20.224 20.224 0 001.777 1.45 18.96 18.96 0 001.888 1.204 18.222 18.222 0 001.992.963 17.492 17.492 0 002.14.722 17.066 17.066 0 002.19.429 17.26 17.26 0 002.23.14 18.092 18.092 0 002.264-.146l278.586-35.51a7.596 7.596 0 001.218-.259 8.272 8.272 0 001.192-.462 9.502 9.502 0 001.161-.662 11.325 11.325 0 001.128-.858 13.498 13.498 0 001.043-1.004q.5-.542.982-1.16.474-.62.918-1.313.445-.693.854-1.459.41-.76.774-1.581.365-.821.682-1.685.32-.868.59-1.776.271-.908.494-1.859.235-.984.404-1.99.17-1.005.29-2.027.117-1.022.175-2.06.058-1.037.058-2.085-.005-1.043-.06-2.068-.054-1.026-.174-2.025-.115-1.003-.289-1.973-.173-.97-.404-1.907-.223-.906-.494-1.76-.267-.853-.588-1.654-.322-.8-.683-1.543-.367-.736-.778-1.423-.41-.686-.853-1.288a13.854 13.854 0 00-.918-1.126 11.677 11.677 0 00-.983-.963 10.034 10.034 0 00-1.042-.795 8.599 8.599 0 00-1.128-.632 7.553 7.553 0 00-1.162-.428 7.055 7.055 0 00-2.407-.241","data-name":"Rectangle 4 - Outline"}),(0,k.jsx)("path",{fill:"#9e616a",d:"M268.9 284.886a13.972 13.972 0 0025.287-11.44l53.994-110.925-25.845-15.667-46.63 117.825q-.267.104-.526.218-.26.114-.517.238-.257.124-.51.26-.254.137-.503.288a13.989 13.989 0 00-4.75 19.202z","data-name":"Path 5"}),(0,k.jsx)("path",{fill:"#ccc",d:"M337.874 205.295l-38.357-9.831s1.252-2.831 3.287-7.522c2.036-4.69 4.88-11.23 8.079-18.655a3860.95 3860.95 0 0010.215-23.923c3.467-8.202 6.838-16.304 9.678-23.328 2.84-7.023 6.065-11.23 9.308-13.587a12.797 12.797 0 019.404-2.5 18.177 18.177 0 017.278 2.77 19.818 19.818 0 012.921 2.217l8.894 16.173z","data-name":"Path 8"}),(0,k.jsx)("path",{className:"card",fill:"#e4e4e4",d:"M30.902 196.51a24.918 24.918 0 00-2.769.361 25.343 25.343 0 00-2.729.67 26.35 26.35 0 00-2.68.98 27.96 27.96 0 00-2.62 1.287q-1.248.702-2.44 1.527-1.191.824-2.314 1.772-1.122.945-2.178 2.015-1.056 1.07-2.034 2.257-.979 1.187-1.855 2.46-.877 1.271-1.645 2.62-.76 1.353-1.423 2.778-.662 1.425-1.203 2.917-.565 1.546-.989 3.126-.423 1.579-.706 3.185-.284 1.606-.426 3.233-.142 1.627-.142 3.268 0 1.64.142 3.24.142 1.598.426 3.147.283 1.55.706 3.043.424 1.494.985 2.927.547 1.383 1.204 2.676a28.575 28.575 0 001.425 2.489 27.291 27.291 0 001.644 2.287 26.51 26.51 0 001.857 2.091 25.409 25.409 0 002.034 1.849 24.073 24.073 0 002.179 1.58 23.191 23.191 0 004.755 2.34 22.744 22.744 0 005.296 1.204 23.287 23.287 0 002.729.12 24.487 24.487 0 002.769-.195 25.37 25.37 0 002.754-.507 25.872 25.872 0 002.69-.808 26.948 26.948 0 002.618-1.104 28.6 28.6 0 002.538-1.394q1.2-.748 2.337-1.606 1.138-.857 2.205-1.827 1.066-.97 2.06-2.046.992-1.076 1.908-2.258.922-1.181 1.736-2.433.814-1.252 1.524-2.57.71-1.318 1.315-2.698.604-1.38 1.101-2.817.515-1.487.902-3 .386-1.514.645-3.048.257-1.536.387-3.088t.13-3.117q0-1.564-.13-3.09-.128-1.527-.387-3.01-.258-1.48-.645-2.918-.388-1.437-.902-2.82-.5-1.339-1.101-2.597-.61-1.254-1.32-2.434a27.302 27.302 0 00-3.255-4.349 25.785 25.785 0 00-1.904-1.877 24.393 24.393 0 00-2.06-1.633 23.563 23.563 0 00-2.204-1.386 23.292 23.292 0 00-2.342-1.131 22.721 22.721 0 00-5.155-1.463 23.07 23.07 0 00-2.69-.268 24.145 24.145 0 00-2.754.046","data-name":"Ellipse 3 - Outline"}),(0,k.jsx)("path",{className:"card",fill:"#e4e4e4",d:"M30.902 309.663a24.918 24.918 0 00-2.769.36 25.345 25.345 0 00-2.729.67 26.353 26.353 0 00-2.68.98 27.96 27.96 0 00-2.62 1.288q-1.248.702-2.44 1.526-1.191.825-2.314 1.772-1.122.945-2.178 2.015-1.056 1.07-2.034 2.257-.979 1.187-1.855 2.46-.877 1.272-1.645 2.621-.76 1.352-1.423 2.777-.662 1.425-1.203 2.917-.565 1.547-.989 3.126-.423 1.58-.706 3.185-.284 1.606-.426 3.233-.142 1.628-.142 3.269 0 1.64.142 3.239.142 1.598.426 3.148.283 1.549.706 3.043.424 1.494.985 2.926.547 1.383 1.204 2.676a28.575 28.575 0 001.425 2.49 27.291 27.291 0 001.644 2.286 26.51 26.51 0 001.857 2.091 25.409 25.409 0 002.034 1.85 24.077 24.077 0 002.179 1.58 23.192 23.192 0 004.755 2.34 22.743 22.743 0 005.296 1.204 23.287 23.287 0 002.729.12 24.49 24.49 0 002.769-.196 25.37 25.37 0 002.754-.507 25.867 25.867 0 002.69-.808 26.945 26.945 0 002.618-1.103 28.597 28.597 0 002.538-1.394q1.2-.75 2.337-1.606 1.138-.857 2.205-1.827 1.066-.97 2.06-2.047.992-1.076 1.908-2.258.922-1.181 1.736-2.433.814-1.252 1.524-2.57.71-1.318 1.315-2.697.604-1.38 1.101-2.817.515-1.488.902-3.001.386-1.513.645-3.048.257-1.536.387-3.088.13-1.551.13-3.116 0-1.565-.13-3.091-.128-1.527-.387-3.01-.258-1.48-.645-2.918-.388-1.437-.902-2.82-.5-1.339-1.101-2.597-.61-1.254-1.32-2.434a27.302 27.302 0 00-3.255-4.349 25.789 25.789 0 00-1.904-1.876 24.395 24.395 0 00-2.06-1.634 23.563 23.563 0 00-2.204-1.385 23.292 23.292 0 00-2.342-1.132 22.72 22.72 0 00-5.155-1.462 23.068 23.068 0 00-2.69-.269 24.143 24.143 0 00-2.754.046","data-name":"Ellipse 3 - Outline"}),(0,k.jsx)("path",{className:"selectedCard",fill:"#00bfa6",d:"M30.9 70.925c4.044.111 8.01 1.138 11.6 3.003a30.442 30.442 0 019.303 7.515 35.431 35.431 0 016.187 10.863 39.624 39.624 0 010 26.337 35.726 35.726 0 01-6.187 10.904 30.728 30.728 0 01-9.304 7.57 26.872 26.872 0 01-11.6 3.078 26.519 26.519 0 01-11.835-2.36 29.925 29.925 0 01-9.845-7.259 35.052 35.052 0 01-6.732-11.115 39.585 39.585 0 010-27.623A35.35 35.35 0 019.22 80.68a30.2 30.2 0 019.845-7.323 26.617 26.617 0 0111.843-2.435z","data-name":"Ellipse 2 - Outline"}),(0,k.jsxs)("g",{"data-name":"Group 1",children:[(0,k.jsx)("path",{fill:"#9e616a",d:"M696.403 662.81l-23.473-.09 7.57 61.334 15.903.08z","data-name":"Path 1-2",transform:"translate(-320.413 -158.75)"}),(0,k.jsx)("path",{fill:"#2f2e41",d:"M700.458 739.567l-51.253-.271v-.648a20.102 20.102 0 01.383-3.918 19.598 19.598 0 012.955-7.12 20.124 20.124 0 015.543-5.516 19.61 19.61 0 017.135-2.924 20.11 20.11 0 013.92-.36l31.317.153z","data-name":"Path 2",transform:"translate(-320.413 -158.75)"})]}),(0,k.jsxs)("g",{"data-name":"Group 2",children:[(0,k.jsx)("path",{fill:"#9e616a",d:"M621.245 662.52l-23.406-.092 7.545 61.251 15.86.08z","data-name":"Path 3",transform:"translate(-320.413 -158.75)"}),(0,k.jsx)("path",{fill:"#2f2e41",d:"M625.29 739.168l-51.12-.268v-.648a20.12 20.12 0 01.384-3.912 19.592 19.592 0 012.946-7.11 20.066 20.066 0 015.53-5.511 19.54 19.54 0 017.117-2.917 20.032 20.032 0 013.91-.361l31.232.153z","data-name":"Path 4",transform:"translate(-320.413 -158.75)"})]}),(0,k.jsx)("path",{fill:"#2f2e41",d:"M299.837 253.08l-39.359 146.883 14.407 140.799 31.9.88-6.946-127.134 39.794-63.445 8.631 191.444 28.936-2.046 16.096-164.603a186.93 186.93 0 0011.954-40.024 178.217 178.217 0 002.827-32.7 152.93 152.93 0 00-1.697-22.048 80.712 80.712 0 00-1.59-8.085l-11.735-11.896z","data-name":"Path 6"}),(0,k.jsx)("path",{fill:"#ccc",d:"M351.985 277.646c-6.619 0-12.83-.213-18.461-.632a138.618 138.618 0 01-17.135-2.256 61.013 61.013 0 01-13.975-4.4 22.425 22.425 0 01-9.064-7.153l-.269-.39L303.84 192.8l11.602-78.721a21.455 21.455 0 0121.89-18.333l36.333 1.113a20.364 20.364 0 0119.702 21.592l-4.77 78.29 17.593 77.223-1.246.174c-.501.067-2.432.321-5.456.662-3.953.444-7.99.845-11.998 1.19-5.67.489-11.218.873-16.49 1.143a383.55 383.55 0 01-19.014.512z"}),(0,k.jsx)("path",{fill:"#2f2e41",d:"M331.823 81.835h-.029a5.804 5.804 0 01-5.8-5.808V43.634a43.29 43.29 0 013.415-16.894A43.987 43.987 0 01352.52 3.507a43.314 43.314 0 0160.388 39.74v32.442a5.814 5.814 0 01-.46 2.272 5.91 5.91 0 01-3.113 3.12 5.833 5.833 0 01-2.273.469l-75.244.285z","data-name":"Path 9"}),(0,k.jsx)("path",{fill:"#9e616a",d:"M389.074 32.525A31.93 31.93 0 01352.15 78.52a31.559 31.559 0 01-18.983-15.208 31.93 31.93 0 0136.897-45.983 31.559 31.559 0 0119.009 15.197z","data-name":"Ellipse 1"}),(0,k.jsx)("path",{fill:"#2f2e41",d:"M315.72 46.27a34.244 34.244 0 012.7-13.361 34.774 34.774 0 0118.277-18.37 34.26 34.26 0 0113.362-2.768l6.483-.033h.219a34.186 34.186 0 0134.165 34.207v.65l-13.715.055-4.677-13.066-.935 13.09-7.084.032-2.358-6.592-.473 6.6-45.958.206z","data-name":"Path 10"}),(0,k.jsx)("path",{className:"hand",fill:"#9e616a",d:"M260.504 114.415a15.047 15.047 0 00-5.785 2.835 14.648 14.648 0 00-3.36 3.767 15.288 15.288 0 00-2.21 9.537 14.635 14.635 0 001.351 4.857c3.805 8.079 13.816 11.015 21.381 6.27.132-.084.262-.17.39-.258a13.012 13.012 0 00.75-.545c.12-.094.24-.19.36-.286l75.682 26.936c24.229 3.3 10.58-29.686 10.58-29.686l-81.895-14.697a20.283 20.283 0 00-.489-1.066 21.22 21.22 0 00-.276-.524 11.038 11.038 0 00-.301-.517 14.877 14.877 0 00-16.178-6.623z","data-name":"Path 11",opacity:"1"}),(0,k.jsx)("path",{className:"hand",fill:"#ccc",d:"M348.231 128.768c2.264-2.826 5.43-6.494 8.646-10.133a867.997 867.997 0 018.941-9.942c2.462-2.698 4.119-4.486 4.119-4.486a17.834 17.834 0 0132.398 13.157 17.575 17.575 0 01-2.66 6.518s-2.469 3.231-6.196 8.054a2426.15 2426.15 0 01-13.743 17.625c-5.03 6.382-10.11 12.732-14.025 17.418-3.917 4.687-6.673 7.715-7.06 7.456L344.99 133.83c-.388-.26.977-2.237 3.241-5.062z","data-name":"Path 12"}),(0,k.jsx)("path",{fill:"#2f2e41",d:"M356.339 80.814a5.712 5.712 0 00.24 3.136 5.842 5.842 0 00.766 1.439 5.909 5.909 0 00.949 1.02 5.795 5.795 0 003.765 1.368q.129-.001.258-.007t.257-.018q.13-.011.26-.03.128-.017.258-.04l4.868-.885 6.705-14.324v13.12l22.132-3.984v-55.68l-37.103.179.917 1.065a25.52 25.52 0 015.778 12.558 41.6 41.6 0 01-.267 14.15 75.016 75.016 0 01-3.95 13.819 110.558 110.558 0 01-5.278 11.583 5.834 5.834 0 00-.555 1.532z","data-name":"Path 13"}),(0,k.jsx)("ellipse",{cx:"317.374",cy:"578.388",fill:"url(#radialGradient1262)",fillOpacity:"1",fillRule:"nonzero",strokeWidth:"1.878",opacity:"0.82",rx:"166.402",ry:"18.663"})]}),(0,k.jsx)("h1",{})]})})};function on(){var n=(0,x.v9)((function(n){return n.chat.currentChat})).Id;(0,x.v9)((function(e){return e.realTime.chatNotifications[n]})).newMsgCount;return(0,k.jsx)(ln,{children:(0,k.jsx)("div",{className:"unreadMsgTag",children:"Unread Message"})})}var cn,dn,ln=h.ZP.div(D||(D=(0,d.Z)(["\nwidth: 100%;\ndisplay: flex;\njustify-content: center;\nalign-items: cetnter;\npadding: 20px;\ndiv{\n    padding: 5px 20px;\n    // background: var(--thm-transparent2-color);\n    border-radius: 5px;\n    box-shadow: -2px -2px 6px var(--thm-transparent2-color), 2px 2px 6px  #060910;\n}"]))),hn=t(4373),pn=function(){var n=(0,x.v9)((function(n){return n.chat.currentChat})),e=n.Id,t=n.messages,a=n.otherMember,r=(0,x.v9)((function(n){return n.user})).user,i=(0,x.v9)((function(n){return n.realTime})),s=i.onlineUsers,o=i.chatNotifications,c=(0,x.I0)(),d=(0,l.useRef)(null),h=(0,l.useRef)(null),g=(0,l.useState)(""),v=(0,p.Z)(g,2),y=v[0],Z=v[1],N=(0,l.useState)(!0),C=(0,p.Z)(N,2),I=C[0],M=C[1],z=function(){var n=(0,m.Z)((0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==y.trim().length){n.next=3;break}return Z(""),n.abrupt("return");case 3:try{console.log(a.name+" is receiver name "+a._id+" is receiver id "),j.Z.emit("client-send-msg",{chatId:e,senderId:r.userId,receiverId:a._id,text:y},(function(n){if(200!=n.status)throw Error(n.error);console.log(n.data.text+" >>>> is reached to server "),c((0,f.uk)({message:(0,Q.Z)({},n.data),userId:r.userId})),c((0,w.ND)((0,Q.Z)({},n.data))),c((0,w.tk)(e)),c((0,f.gR)({chatId:e}))})),Z("")}catch(t){console.log(t),c((0,w.tk)(e))}case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,l.useEffect)((function(){return j.Z.on("server-send-msg",(function(n){console.log(n.senderId+" and receiver id is "+a._id),n.chatId===e?(c((0,f.uk)({message:(0,Q.Z)({},n),userId:r.userId})),c((0,w.ND)((0,Q.Z)({},n))),c((0,w.tk)(e)),j.Z.emit("message-viewed",e,n._id,(function(n){console.log("message is viewed in current message with status "+n.status)}))):c((0,w.at)((0,Q.Z)({},n))),c((0,f.gR)({chatId:n.chatId}))})),function(){j.Z.off("server-send-msg")}}),[e]),(0,l.useEffect)((function(){h.current&&h.current.scrollTo(0,h.current.scrollHeight)}),[t]),(0,k.jsx)(k.Fragment,{children:""===e?(0,k.jsx)(sn,{}):(0,k.jsxs)(xn,{children:[(0,k.jsxs)("div",{className:"head",children:[(0,k.jsxs)("div",{className:"userInfo-container",children:[(0,k.jsxs)("div",{className:"back-container",onClick:function(){c((0,b.Lb)("chatBody")),c((0,f.wt)())},children:[(0,k.jsx)(hn.PjY,{}),(0,k.jsx)("div",{className:"img-container",children:(0,k.jsx)("img",{src:"userpic",alt:"chat user"})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("span",{children:a.name}),s[a._id]?(0,k.jsx)("span",{children:"Online"}):null]})]}),(0,k.jsxs)("div",{className:"functionality-container",children:[(0,k.jsxs)("ul",{children:[(0,k.jsx)("li",{children:(0,k.jsx)(P.jLr,{})}),(0,k.jsx)("li",{children:(0,k.jsx)(tn.ZkW,{})})]}),(0,k.jsx)("div",{className:"close-message",onClick:function(){c((0,f.h$)({name:"",Id:""})),c((0,f.wt)())},children:(0,k.jsx)(an.OZs,{})})]})]}),(0,k.jsxs)("div",{className:"background-container",children:[(0,k.jsx)("div",{className:(I?"":"scrolling-down")+" messages custom-scroll",ref:h,onScroll:function(n){return function(n){var e=n.target.scrollTop+n.target.clientHeight>=n.target.scrollHeight;M(e)}(n)},children:t.length>0?o[e]&&o[e].lastViewedMessage&&o[e].lastViewedMessage._id!==o[e].lastMessage._id&&o[e].lastMessage.senderId!==r.userId?t.map((function(n,t){return(0,k.jsx)(k.Fragment,{children:o[e].lastViewedMessage._id===n._id?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(en,{message:n},t),(0,k.jsx)(on,{})]}):(0,k.jsx)(en,{message:n},t)})})):t.map((function(n,e){return(0,k.jsx)(en,{message:n},e)})):(0,k.jsx)("h2",{className:"msg-404",children:"No messages found."})}),(0,k.jsxs)("div",{className:"text-editor",children:[(0,k.jsxs)("div",{className:"wrap-auto-resize",children:[(0,k.jsx)("div",{className:"textarea-cpy",children:y+" "}),(0,k.jsx)("textarea",{className:"custom-scroll",name:"message",rows:"1",placeholder:"write your message here",focus:"true",ref:d,value:y,onChange:function(n){return Z(n.target.value)},virtualkeyboardpolicy:"manual",onClick:function(){d.current.removeAttribute("virtualkeyboardpolicy")},onBlur:function(n){n.currentTarget.focus()},autoFocus:!0})]}),(0,k.jsx)("div",{children:(0,k.jsx)("button",{onClick:z,children:(0,k.jsx)(tn.D6S,{})})})]})]})]})})},xn=h.ZP.section(cn||(cn=(0,d.Z)(['\n  height: 100%;\n  width: 100%;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n\n  @media (max-width: 450px){\n    padding: 20px 10px 10px 10px;\n  }\n  \n  \n  .head {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 100px;\n\n    @media ( max-width: 950px ){\n      margin-top: -20px;\n    }\n\n    .userInfo-container{\n      display: flex;\n      gap: 15px;\n      width: 100%;\n\n      .back-container{\n        display: flex;\n        align-items: center;\n\n        \n        &>svg{\n          height: 35px;\n          width: 35px;\n          \n          @media (min-width: 750px){\n            display: none;\n          }\n        }\n      }\n\n      .img-container{\n        width: 60px;\n        height: 60px;\n        background-color: yellow;\n        border-radius: 50%;\n\n        img{\n          width: 100%;\n          border-radius: 50%;\n        }\n      }\n\n      &>div:last-child{\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        overflow: none;\n        overflow: hidden;\n\n        &>span:first-child{\n          font-weight: bold;\n          font-size: 20px;\n          text-overflow: ellipsis;\n          overflow: hidden;\n\n          &+span{\n            font-size: 10px;\n            font-style: italic;\n            color: #d5d5d5;\n          }\n        }\n      }\n    }\n\n    .functionality-container{\n      display: flex;\n      display: none;\n      gap: 40px;\n      align-items: center;\n      justify-content: space-between;\n\n      ul{\n        display: flex;\n        list-style: none;\n        gap: 20px;\n  \n        // li{\n        //   margin: 10px;\n        // }\n        svg{\n          width: 20px;\n          height: 20px;\n        }\n      }\n\n      .close-message{\n        svg{\n          width: 30px;\n          height: 30px;\n        }\n      }\n\n      svg{\n        transform: scale(1);\n        transition: 0.2s ease;\n      }\n      li, .close-message{\n        &:hover svg{\n          transform: scale(1.2);\n        }\n      }\n    }\n  }\n\n\n  .background-container{\n    background-color: var(--thm-transparent-color);\n    border-radius: 10px;\n    padding: 10px 40px;\n    height: calc(100% - 100px);\n    display: flex;\n    gap: 10px;\n    flex-direction: column;\n    overflow: hidden;  \n\n    @media (max-width: 950px){\n      height: calc(100% - 80px);\n      padding: 10px 20px;\n    }\n\n    @media (max-width: 450px){\n      padding: 10px;\n    }\n\n\n    .messages {\n      height: calc(100% - 100px);\n      flex-shrink: 1;\n      flex-grow: 1;\n      position: relative;\n      margin-right: -20px;\n\n      @media (max-width: 450px){\n        margin-right: -5px;\n      }\n\n      .msg-404{\n        height: 100%;\n        width: 100%;\n        margin: 0px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 30px;\n        color: var(--thm-transparent-color);\n      }\n\n\n      &.scrolling-down + .text-editor::before{\n        opacity: 1;\n      }\n    }\n\n    \n\n    .text-editor {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-end;\n      flex-shrink: 0;\n      flex-grow: 0;\n      padding: 10px 0px;\n      position: relative;\n      gap: 10px;\n\n      @media (max-width: 450px){\n        padding: 0;\n      }\n\n      //for shadow below msg container\n      &::before{\n        --height: 10px;\n        content: "";\n        display: block;\n        position: absolute;\n        top: calc(-10px - var(--height));\n        left: -50%;\n        width: 200%;\n        height: var(--height);\n        background: linear-gradient(0deg,var(--thm-background-color), transparent);\n        opacity: 0;\n        pointer-event: none;\n        transition: 0.15s ease;\n      }\n\n      \n      &>.wrap-auto-resize{\n        width: 100%;\n        min-height: 40px;\n        display: grid;\n        padding: 8px;\n        border-radius: 8px;\n        border: 1px solid var(--thm-primary-color);\n        flex-grow: 1;\n        flex-shrink: 1;\n\n        &>.textarea-cpy{\n          white-space: pre-wrap;\n          word-break: break-word;\n          visibility: hidden;\n        }\n\n        &>textarea, &>.textarea-cpy {\n          width: calc(100% + 10px);\n          min-height: 100%;\n          max-height: 6.2em;\n          margin-right: -8px; //equal to parent padding\n          border: none;\n          outline: none;\n          background-color: transparent;\n          font-size: 15px;\n          line-height: 1.25em;\n          resize: none;\n          grid-area: 1/1/2/2;\n        }\n        &>textarea::placeholder{\n          color: var(--thm-transparent2-color);\n        }\n      }\n      \n      \n      &>div:last-child{\n        display: flex;\n        flex-shrink: 0;\n        flex-grow: 0;\n        justify-content: center;\n        align-items: center;\n        \n        button {\n          width: 40px;\n          height: 40px;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          padding: 10px;\n          background-color: var(--thm-secondary-color);\n          border: none;\n          outline: none;\n          border-radius: 8px;\n\n          &>svg{\n            width: 30px;\n            height: 30px;\n          }\n        }\n      }\n    }\n  }\n  \n\n']))),un=l.memo(pn);function mn(n){n.currentTarget.scrollTo(0,1)}var gn=function(){var n=(0,x.v9)((function(n){return n.user})).user,e=(0,x.v9)((function(n){return n.chatNav})).mobileViewSection,t=(0,x.I0)();return(0,l.useEffect)((function(){function e(){j.Z.emit("register-connection",{userId:n.userId,socketId:j.Z.id},(function(n){console.log(n),t((0,w.Rx)(n.onlineUsers))}))}return j.Z.connected?e():j.Z.on("connect",(function(){e()})),j.Z.on("new-user-connected",(function(n){t((0,w.ai)(n))})),j.Z.on("user-disconnected",(function(n){t((0,w.WZ)(n))})),function(){j.Z.off("connect"),j.Z.off("register-connection"),j.Z.off("new-user-connected"),j.Z.off("user-disconnected")}}),[]),(0,l.useEffect)((function(){window.scrollTo(0,1)})),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(fn,{onLoad:mn,children:(0,k.jsxs)("div",{className:(console.warn(e)||"currentChatContainer"===e?"show-current-message-container ":"")+"container",children:[(0,k.jsx)("nav",{children:(0,k.jsx)(R,{})}),(0,k.jsx)("div",{className:"chat-container",children:(0,k.jsx)(W,{})}),(0,k.jsx)("div",{className:"current-chat-container",children:(0,k.jsx)(un,{})})]})})})},fn=h.ZP.section(dn||(dn=(0,d.Z)(["\n --thm-svg-color: #9e9e9e;\n --thm-svg-active-color: var(--thm-primary-color); \n\n  width: 100vw;\n  height: 100vh;\n  height: var(--calculated-vh, 100vh);\n  overflow: hidden;\n  position: relative;\n\n  &:fullscreen, &::backdrop{\n    background-color: var(--thm-background-color);\n  }\n\n  *{\n    color: white;\n  }\n\n  .container {\n    display: flex;\n    height: 100%;\n    width: 100%;\n    transition: 0.2s ease;\n\n    @media (max-width: 950px){\n      overflow: hidden;\n      display: grid;\n      grid-template-columns: 0.75fr 1fr;\n      grid-auto-rows: 100%;\n    }\n    @media (max-width: 750px){\n      position: absolute;\n      top: 0;\n      left: 0;\n      grid-template-columns: 1fr 1fr;\n      width: 200%;\n    }\n\n    &.show-current-message-container{\n      @media( max-width: 750px){\n        left: -100%;\n      }\n    }\n\n    &>nav{\n      height: 100%;\n      @media (max-width: 950px){\n        display: none;\n      }\n    }\n\n    .chat-container {\n      flex-basis: 400px;\n      width: 400px;\n      min-width: 350px;\n      height: 100%;\n      overflow-y: auto;\n      overflow-x: hidden;\n\n      @media (max-width: 950px){\n        width: 100%;\n        grid-area: 1/1/2/2;\n      }\n    }\n\n    .current-chat-container {\n      width: calc(100% - 80px - 400px);\n      min-width: 350px;\n      height: 100%;\n\n      @media (max-width: 950px){\n        width: 100%;\n        grid-area: 1/2/2/3;\n      }\n    }\n  }\n"]))),vn=l.memo(gn)}}]);
//# sourceMappingURL=943.3e22f177.chunk.js.map